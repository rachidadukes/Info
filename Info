
private void txtRequest1_TextChanged(object sender, TextChangedEventArgs e)
{
    txtRequest1LineNumbers.Text = GetLineNumbers(txtRequest1.LineCount);
}

private void txtRequest2_TextChanged(object sender, TextChangedEventArgs e)
{
    txtRequest2LineNumbers.Text = GetLineNumbers(txtRequest2.LineCount);
}

private string GetLineNumbers(int lineCount)
{
    var sb = new StringBuilder();
    for (int i = 1; i <= lineCount; i++)
    {
        sb.AppendLine(i.ToString());
    }
    return sb.ToString();
}


==============================

<Grid Margin="0,5,0,0" Height="150">
    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="Auto" />
        <ColumnDefinition Width="*" />
    </Grid.ColumnDefinitions>

    <!-- Line Numbers -->
    <TextBlock x:Name="txtRequest1LineNumbers"
               FontFamily="Consolas"
               Padding="5,0,5,0"
               TextAlignment="Right"
               VerticalAlignment="Top"
               Foreground="Gray"
               />

    <!-- Main Text -->
    <TextBox x:Name="txtRequest1"
             Grid.Column="1"
             AcceptsReturn="True"
             VerticalScrollBarVisibility="Auto"
             TextWrapping="Wrap"
             FontFamily="Consolas"
             TextChanged="txtRequest1_TextChanged" />
</Grid>

<!-- Repeat for txtRequest2 -->
<Grid Margin="0,5,0,0" Height="150">
    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="Auto" />
        <ColumnDefinition Width="*" />
    </Grid.ColumnDefinitions>

    <!-- Line Numbers -->
    <TextBlock x:Name="txtRequest2LineNumbers"
               FontFamily="Consolas"
               Padding="5,0,5,0"
               TextAlignment="Right"
               VerticalAlignment="Top"
               Foreground="Gray"
               />

    <!-- Main Text -->
    <TextBox x:Name="txtRequest2"
             Grid.Column="1"
             AcceptsReturn="True"
             VerticalScrollBarVisibility="Auto"
             TextWrapping="Wrap"
             FontFamily="Consolas"
             TextChanged="txtRequest2_TextChanged" />
</Grid>
