using System.IO;
using System.Xml.Serialization;
using FinancialInquiryService; // namespace of VerifyAcctNumberInqRq

public static class XmlHelper
{
    public static T DeserializeXml<T>(string xml)
    {
        var serializer = new XmlSerializer(typeof(T));
        using var reader = new StringReader(xml);
        return (T)serializer.Deserialize(reader)!;
    }
}


=================================

// 1) Build the request as XML (your existing code)
string xmlAccountRequest = StringAccountRequest.GenerateAccountRequest(selectedAccount);

// (optional) log it
Console.WriteLine("REQUEST XML:");
Console.WriteLine(xmlAccountRequest);

// 2) Deserialize XML -> strongly-typed WCF request
var rq = XmlHelper.DeserializeXml<VerifyAcctNumberInqRq>(xmlAccountRequest);

// 3) Call the WCF method
Console.WriteLine("Calling VerifyAcctNumberInq...");
var rs = await client.VerifyAcctNumberInqAsync(rq);

// 4) Inspect response
Console.WriteLine($"Status: {rs.Status?.StatusCode} - {rs.Status?.StatusDesc}");
Console.WriteLine("Response received.");


================================


var soapEnvelope = $@"<?xml version=""1.0""?>
<s:Envelope xmlns:s=""http://schemas.xmlsoap.org/soap/envelope/"">
  <s:Body>
    {xmlAccountRequest}
  </s:Body>
</s:Envelope>";

using var httpClient = new HttpClient();
var content = new StringContent(soapEnvelope, Encoding.UTF8, "text/xml");
content.Headers.Add("SOAPAction", "VerifyAcctNumberInq"); // depends on WSDL

var httpResponse = await httpClient.PostAsync(serviceUrl, content);
var soapResponseXml = await httpResponse.Content.ReadAsStringAsync();
==========================

string xmlAccountRequest = StringAccountRequest.GenerateAccountRequest(selectedAccount);
var rq = XmlHelper.DeserializeXml<VerifyAcctNumberInqRq>(xmlAccountRequest);
var rs = await client.VerifyAcctNumberInqAsync(rq);
