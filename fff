using FinancialInquiryService; // namespace of the generated proxy

namespace FinancialInquiryServiceApp
{
    public class AccountRequest
    {
        // optional: inject settings later (HostSettings, user, branch, etc.)
        // private readonly HostSettings _settings;
        // public AccountRequest(HostSettings settings) => _settings = settings;

        public VerifyAcctNumberInqRq GenerateVerifyAcctNumberInqRq(AccountModel account)
        {
            if (account is null)
                throw new ArgumentNullException(nameof(account));

            return new VerifyAcctNumberInqRq
            {
                MsgRqHdr = BuildHeader(),
                VerifyAcctNumberInqInfo = BuildInfo(account)
            };
        }

        private MsgRqHdr_Type BuildHeader()
        {
            // ðŸ” Later you can pull these from config instead of hard-coding
            return new MsgRqHdr_Type
            {
                RqUID          = "e3fa9c33-d5d9-4f07-a299-9997d6144d36",
                TranCode       = "0084",
                BranchId       = "D3",
                PCName         = "LTCU34439W0EBE4",
                TranCodeQual   = "0000",
                CashBoxId      = "0",
                EmployeeId     = "15308",
                PostingDt      = "2022-02-18",
                CalendarDt     = "2025-11-17",
                TranTime       = "14:23:21",
                TranSeqNum     = "0",
                ForwardTranFlag = YesNo_Type.N,
                MultiTranFlag   = YesNo_Type.Y
            };
        }

        private VerifyAcctNumberInqInfo_Type BuildInfo(AccountModel account)
        {
            return new VerifyAcctNumberInqInfo_Type
            {
                AcctKeys = new AcctKeys_Type
                {
                    AcctId = account.AccountNumber,
                    AcctType = account.AccountType switch
                    {
                        "SAV" => AcctKeys_TypeAcctType.SAV,
                        "CHK" => AcctKeys_TypeAcctType.CHK,
                        "SHR" => AcctKeys_TypeAcctType.SHR,
                        _     => AcctKeys_TypeAcctType.CHK
                    }
                }
            };
        }
    }
}
