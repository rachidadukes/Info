public static HttpClient CreateTestHttpClient(string baseAddress, TimeSpan? timeout = null)
{
    var handler = new HttpClientHandler(); // no per-handler cert callback on 4.7
    var client = new HttpClient(handler)
    {
        BaseAddress = new Uri(baseAddress),
        Timeout = timeout ?? TimeSpan.FromSeconds(30)
    };
    return client;
}

// Call site (DEV/TEST ONLY)
using (CertificateBypassScope.AllowAll())
{
    using (var client = CreateTestHttpClient("https://example.test/"))
    {
        var resp = client.GetAsync("ping").Result;
        // ...
    }
}
